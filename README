Howto setup a tinderbox
=======================

LibreOffice tinderbox - a script that builds the project over and over
again, and reports success or problems to

http://tinderbox.go-oo.org/MASTER/status.html

Short version
-------------

$ git clone git://anongit.freedesktop.org/libreoffice/bootstrap tinderbox
$ cd tinderbox
$ ./autogen.sh [params]
[make sure that you fulfill all the configure needs]
$ make
[make sure that you get at least one successful build, for sanity check]
$ cd ..
$ git clone git://anongit.freedesktop.org/libreoffice/contrib/buildbot
$ cd tinderbox
$ screen ../buildbot/bin/tinbuild [params]
[and now let that box do the work :-)]

Longer version
--------------

Prepare your build tree from git as described here:

http://wiki.documentfoundation.org/Development/Native_Build

Configure your build, *do* a build (if necessary, fix the build),
tweak your setup to get optimal performance (play with
--with-num-cpus, use ccache etc.)

After a successful build, 'cd' into the source tree (the same dir that
also has the autogen.sh and configure scripts), and run tinbuild.

A typical call for a home box (without a working smtp relay) looks
like this:

tinbuild -m joe_hacker@gmail.com -s smtp.gmail.com -u joe_hacker -p SeCrEt -c tls -t "Linux gcc-4.4.1 (x86_64)"

If you don't want the user or password to show up in the process list,
simply edit the tinbuild script - rather at the top of it, there are
SMTPUSER and SMTPPW variables, to be set.

This setup will then continuously build the tree (whenever there are
new commits), and send results to the tinderbox master, as well as
complaint mails to the committers that broke the build. To prevent
excessive spam, you'll get a Bcc of those nag mails - so you'll
notice.

Random configure options to help speed up the build
---------------------------------------------------

The following options speed up the build, sometimes at the cost of
coverage, functionality, or robustness. YMMV.

 * --disable-dependency-tracking - avoids wasting time with
   determining header dependencies, with a one-off build
   This option is also essential for getting reliable build logs
 * --disable-mozilla --without-system-mozilla - don't build parts of
   mozilla. You'll miss breakages that use moz functionality
 * --disable-binfilter - don't build old legacy StarOffice binary
   formats. Highly deprecated code, may vanish soon
 * --disable-odk - do not pack office development kit - not considered
   core functionality
 * --with-num-cpus=2 --with-max-jobs=2 - for the typical dual core
   machine, with ccache, a rather good starting point to keep ~100%
   load.
